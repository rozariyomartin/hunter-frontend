<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writeup | Team Hunter</title>
    <meta name="description" content="Team Hunter CTF write-up and security research">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Share+Tech+Mono&family=Orbitron:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Markdown rendering library -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>

<body class="bg-black text-white overflow-x-hidden">

    <!-- Cursor Trail -->
    <div id="cursor-glow" class="cursor-glow"></div>

    <!-- Particle Background -->
    <canvas id="particle-canvas" class="particle-canvas"></canvas>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 nav-glass">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="index.html" class="text-2xl font-bold font-orbitron cyber-glow">
                    <span class="text-cyber-green">&gt;</span> TEAM HUNTER
                </a>
                <div class="flex gap-4 items-center">
                    <button onclick="history.back()" class="nav-link font-rajdhani text-lg">← Back</button>
                    <a href="index.html#writeups" class="nav-link font-rajdhani text-lg">All Writeups</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <section class="section-padding relative" style="padding-top: 8rem;">
        <div class="container mx-auto px-6">
            <div class="glass-panel">
                <div id="loading" class="text-center py-12">
                    <div class="loading-spinner"></div>
                    <p class="text-xl text-cyber-cyan font-rajdhani mt-4">Loading writeup...</p>
                </div>

                <div id="error" class="text-center py-12 hidden">
                    <div class="text-6xl mb-4">⚠️</div>
                    <h2 class="text-2xl font-orbitron text-cyber-purple mb-4">Error Loading Writeup</h2>
                    <p class="text-cyber-cyan font-rajdhani mb-6" id="error-message">Could not load the requested
                        writeup.</p>
                    <a href="index.html#writeups" class="cta-button cta-secondary inline-block">
                        <span class="relative z-10">Back to Writeups</span>
                    </a>
                </div>

                <article id="markdown-content" class="markdown-body hidden">
                    <!-- Markdown content will be rendered here -->
                </article>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="script.js"></script>
    <script>
        // Configure marked for GitHub-flavored markdown
        marked.setOptions({
            highlight: function (code, lang) {
                if (lang && hljs.getLanguage(lang)) {
                    return hljs.highlight(code, { language: lang }).value;
                }
                return hljs.highlightAuto(code).value;
            },
            breaks: true,
            gfm: true
        });

        // Get the URL from query parameter
        const urlParams = new URLSearchParams(window.location.search);
        const markdownUrl = urlParams.get('url');

        if (markdownUrl) {
            // Fetch and render the markdown
            fetch(markdownUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.text();
                })
                .then(markdown => {
                    // Hide loading, show content
                    document.getElementById('loading').classList.add('hidden');
                    document.getElementById('markdown-content').classList.remove('hidden');

                    // Render markdown to HTML
                    const html = marked.parse(markdown);
                    document.getElementById('markdown-content').innerHTML = html;

                    // Apply syntax highlighting
                    document.querySelectorAll('pre code').forEach((block) => {
                        hljs.highlightElement(block);
                    });

                    // Extract title from first h1 if available
                    const firstH1 = document.querySelector('#markdown-content h1');
                    if (firstH1) {
                        document.title = `${firstH1.textContent} | Team Hunter`;
                    }
                })
                .catch(error => {
                    console.error('Error loading writeup:', error);
                    document.getElementById('loading').classList.add('hidden');
                    document.getElementById('error').classList.remove('hidden');
                    document.getElementById('error-message').textContent = error.message || 'Could not load the requested writeup.';
                });
        } else {
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('error').classList.remove('hidden');
            document.getElementById('error-message').textContent = 'No writeup URL provided.';
        }
    </script>

    <style>
        /* Loading Spinner */
        .loading-spinner {
            border: 4px solid rgba(0, 212, 255, 0.1);
            border-top: 4px solid var(--cyber-cyan);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Markdown Content Styles */
        .markdown-body {
            color: var(--text-primary);
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .markdown-body h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--cyber-green);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(0, 255, 136, 0.3);
        }

        .markdown-body h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 600;
            color: var(--cyber-cyan);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        .markdown-body h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--cyber-purple);
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }

        .markdown-body p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        .markdown-body a {
            color: var(--cyber-cyan);
            text-decoration: underline;
            transition: all 0.3s ease;
        }

        .markdown-body a:hover {
            color: var(--cyber-green);
            text-shadow: 0 0 10px var(--glow-green);
        }

        .markdown-body code {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 0.25rem;
            padding: 0.2rem 0.4rem;
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.9em;
            color: var(--cyber-cyan);
        }

        .markdown-body pre {
            background: rgba(0, 0, 0, 0.7) !important;
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        .markdown-body pre code {
            background: transparent;
            border: none;
            padding: 0;
            color: inherit;
        }

        .markdown-body ul,
        .markdown-body ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }

        .markdown-body li {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .markdown-body blockquote {
            border-left: 4px solid var(--cyber-purple);
            padding-left: 1rem;
            margin: 1.5rem 0;
            color: var(--text-secondary);
            font-style: italic;
        }

        .markdown-body table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        .markdown-body th {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            color: var(--cyber-green);
        }

        .markdown-body td {
            border: 1px solid rgba(0, 212, 255, 0.2);
            padding: 0.75rem;
            color: var(--text-secondary);
        }

        .markdown-body tr:hover {
            background: rgba(0, 212, 255, 0.05);
        }

        .markdown-body img {
            max-width: 100%;
            height: auto;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .markdown-body hr {
            border: none;
            border-top: 1px solid rgba(0, 212, 255, 0.3);
            margin: 2rem 0;
        }
    </style>
</body>

</html>